# vim: set filetype=i3config :

set $volume exec --no-startup-id media-control volume
# Use pactl to adjust volume in PipeWire-Pulse.
bindsym XF86AudioRaiseVolume $volume up
bindsym XF86AudioLowerVolume $volume down
bindsym XF86AudioMute $volume mute
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Use playerctl to control the music player.
bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym XF86AudioPrev exec --no-startup-id playerctl previous
bindsym XF86AudioNext exec --no-startup-id playerctl next

set $backlight exec --no-startup-id media-control backlight
# Use brightnessctl to adjust backlight brightness.
bindsym XF86MonBrightnessDown $backlight down
bindsym XF86MonBrightnessUp $backlight up

# Screenshots.
bindsym Print mode "screenshot: [f]ullscreen | [a]ctive window | [c]urrent screen | [r]ectangular selection | color[p]icker"
mode "screenshot: [f]ullscreen | [a]ctive window | [c]urrent screen | [r]ectangular selection | color[p]icker" {
        bindsym f mode "default"; exec --no-startup-id ksnip --fullscreen
        bindsym a mode "default"; exec --no-startup-id ksnip --active
        bindsym c mode "default"; exec --no-startup-id ksnip --current
        bindsym r mode "default"; exec --no-startup-id ksnip --rectarea
        bindsym p mode "default"; exec --no-startup-id xcolor --selection

        # Screenshot the current screen when double-tapping PrintScr.
        bindsym Print mode "default"; exec --no-startup-id ksnip --current

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

bindsym $mod+u mode "utitilies: [p]icom | p[o]lybar | [a]utorandr | [d]arkman | [f]eh"
mode "utitilies: [p]icom | p[o]lybar | [a]utorandr | [d]arkman | [f]eh" {
        bindsym p exec --no-startup-id toggle-picom; mode "default"
        bindsym o exec --no-startup-id start-polybar; mode "default"
        bindsym a exec --no-startup-id autorandr --change; mode "default"
        bindsym d exec --no-startup-id darkman toggle; mode "default"
        bindsym f exec --no-startup-id ~/.fehbg; mode "default"

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# Close the most recent notification.
bindsym $mod+Escape exec --no-startup-id dunstctl close

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# pressing $mod+1 twice navigates to $ws1 then back to the previous workspace.
workspace_auto_back_and_forth yes

# kill focused window
bindsym $mod+Shift+q kill

# Start rofi.
bindsym $mod+o exec --no-startup-id "rofi -show drun \
-drun-match-fields name,categories,generic -sort -drun-display-format {name}"

set $mouse_to_focus exec --no-startup-id ~/.config/i3/move_cursor_to_focused.sh

# change focus
bindsym $mod+j focus left; $mouse_to_focus
bindsym $mod+k focus right; $mouse_to_focus

# move focused window
bindsym $mod+Shift+j move left; $mouse_to_focus
bindsym $mod+Shift+k move right; $mouse_to_focus

# Move workspace to next output.
bindsym $mod+Shift+n move workspace to output right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+grave workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace and switch to that workspace
bindsym $mod+Shift+1 move container to workspace number $ws1; workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2; workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3; workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4; workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5; workspace number $ws5
bindsym $mod+Shift+grave move container to workspace number $ws5; workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6; workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7; workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8; workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9; workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10; workspace number $ws10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# Power options.
bindsym $mod+slash mode "[p]oweroff | [r]eboot | [l]ock"
mode "[p]oweroff | [r]eboot | [l]ock" {
        bindsym p exec --no-startup-id poweroff
        bindsym r exec --no-startup-id reboot
        bindsym l mode "default"; exec --no-startup-id lock

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# Frequently used programs.
bindsym $mod+Return mode "[t]erminal | [b]rowser | [s]team | [d]iscord | [m]usic | [f]ile manager"
mode "[t]erminal | [b]rowser | [s]team | [d]iscord | [m]usic | [f]ile manager" {
        bindsym t mode "default"; workspace --no-auto-back-and-forth number $ws1; exec --no-startup-id alacritty -e $tmux
        bindsym b mode "default"; workspace --no-auto-back-and-forth number $ws2; exec --no-startup-id zen-browser
        bindsym s mode "default"; workspace --no-auto-back-and-forth number $ws5; exec --no-startup-id steam
        bindsym m mode "default"; workspace --no-auto-back-and-forth number $ws4; exec --no-startup-id spotify-launcher
        bindsym d mode "default"; workspace --no-auto-back-and-forth number $ws3; exec --no-startup-id discord
        bindsym f mode "default"; exec --no-startup-id alacritty -e yazi

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}
